<?xml version="1.0"?>
<digester-rules>
	<pattern value="*/Application">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiApplicationCTLImpl" />
		<!--
			<factory-create-rule classname="com.hisun.engine.HiBeanFactory"/>
		-->
		<set-properties-rule />

		<call-method-rule methodname="loadAfter" />
	</pattern>

	<!-- parsing the ConfigDeclare -->
	<pattern value="*/ConfigDeclare">
		<object-create-rule
			classname="com.hisun.engine.invoke.load.HiConfigDeclare" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule pattern="Config" methodname="setConfigInfo"
			paramcount="2" />
		<call-param-rule pattern="Config" attrname="name"
			paramnumber="0" />
		<call-param-rule pattern="Config" attrname="value"
			paramnumber="1" />
		<call-method-rule methodname="loadAfter" />
		<!-- addAppdlication
			<set-next-rule methodname="setCommonds"/>
		-->
	</pattern>

	<!-- parsing the PackageDeclare -->
	<pattern value="*/PackageDeclare">
		<object-create-rule
			classname="com.hisun.engine.invoke.load.HiPackageDeclare" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule pattern="Package" methodname="setPackageInfo"
			paramcount="2" />
		<call-param-rule pattern="Package" attrname="name"
			paramnumber="0" />
		<call-param-rule pattern="Package" attrname="value"
			paramnumber="1" />
		<call-method-rule methodname="loadAfter" />
	</pattern>
	<!-- parsing the Package -->
	<pattern value="*/Package">
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<object-create-rule
			classname="com.hisun.engine.invoke.load.HiDelegate" />
		<call-method-rule methodname="setNodeName" paramcount="1" />
		<object-param-rule type="java.lang.String" paramnumber="0"
			param="" value="Package" />
		<call-method-rule methodname="loadAfter" />
	</pattern>

	<!-- parsing the LibDeclare -->
	<pattern value="*/LibDeclare">
		<object-create-rule
			classname="com.hisun.engine.invoke.load.HiLibDeclare" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule pattern="Library" methodname="setLibrary"
			paramcount="2" />
		<call-param-rule pattern="Library" attrname="name"
			paramnumber="0" />
		<call-param-rule pattern="Library" attrname="value"
			paramnumber="1" />
		<call-method-rule methodname="loadAfter" />
		<!-- addAppdlication 
			<set-next-rule methodname="setCommonds"/>
		-->
	</pattern>
	<!-- parsing the LibDeclare -->
	<pattern value="*/TableDeclare">
		<object-create-rule
			classname="com.hisun.engine.invoke.load.HiTableDeclare" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule pattern="Table" methodname="setTableInfo"
			paramcount="2" />
		<call-param-rule pattern="Table" attrname="name"
			paramnumber="0" />
		<call-param-rule pattern="Table" attrname="value"
			paramnumber="1" />
	</pattern>
	<!-- parsing the GlobalFunction -->
	<pattern value="*/GlobalFunction">
		<object-create-rule
			classname="com.hisun.engine.invoke.load.HiGlobalFunction" />
		<call-method-rule methodname="loadAfter" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
	</pattern>
	<!-- parsing the Function -->
	<pattern value="*/Function">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiFunction" />
		<set-properties-rule/>
		<call-method-rule pattern="Input" methodname="setInput"  paramcount="1" />
		<call-param-rule pattern="Input" paramnumber="0" />
		<call-method-rule pattern="Output" methodname="setOutput"  paramcount="1" />
		<call-param-rule pattern="Output" paramnumber="0" />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
		<call-method-rule methodname="loadAfter" />
	</pattern>

	<!-- parsing the BusDefDeclare -->
	<pattern value="*/BusDefDeclare">
		<object-create-rule
			classname="com.hisun.engine.invoke.load.HiBusDefDeclare" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule pattern="Busdef" methodname="setBusDef"
			paramcount="2" />
		<call-param-rule pattern="Busdef" attrname="name"
			paramnumber="0" />
		<call-param-rule pattern="Busdef" attrname="value"
			paramnumber="1" />

		<set-next-rule methodname="setInitList" />
		<call-method-rule methodname="loadAfter" />
	</pattern>

	<!-- parsing the Transaction -->
	<!--  -->
	<pattern value="*/Transaction">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiTransactionCTLImpl" />
		<set-properties-rule />

		<!--<set-next-rule methodname="addTransaction"/>-->
		<!--
			<call-method-rule targetoffset="1" methodname="addTransaction" paramcount="2"
			paramtypes="com.hisun.invoke.impl.HiTransactionITFImpl,java.lang.String"/>
			<call-param-rule from-stack="true" paramnumber="0"/>
			<call-param-rule attrname="code" paramnumber="1"/>
		-->
		<!--set-next-rule methodname="addTransaction"
			paramtype="com.hisun.engine.invoke.impl.HiTransactionCTLImpl"/-->
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />

		<pattern value="Attributes">
			<object-create-rule
				classname="com.hisun.engine.invoke.impl.HiAttributes" />
			<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
			<!--
				<pattern value="Attribute">
				<object-create-rule
				classname="org.apache.commons.digester.NodeCreateRule"/>
				<set-next-rule methodname="setPropertyss"/>
				</pattern>
				
				<call-method-rule pattern="Attribute" methodname="setPropertyss"
				paramcount="2"/>
				<object-param-rule pattern="Attribute" type="java.lang.String"
				paramnumber="0" param="" value="name"/>
				<call-param-rule pattern="Attribute" attrname="value" paramnumber="1"/>
			-->
		</pattern>
		<call-method-rule methodname="loadAfter" />
	</pattern>
	<!-- parsing the FlowCtrl 
		<pattern value="Application/Transaction/FlowCtrl">
		<factory-create-rule classname="com.hisun.engine.HiBeanFactory"/>
		<set-properties-rule/>
		<set-next-rule methodname="addChilds"/>
		<set-top-rule methodname="setParent"/>
		</pattern>
	-->

	<!-- parsing the DynSentence -->
	<pattern value="*/DynSentence">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiDynSentence" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />

		<call-method-rule pattern="Sentence" methodname="setSentence"
			paramcount="0" />
		<call-method-rule pattern="Fields" methodname="setFields"
			paramcount="0" />

		<!--set-next-rule methodname="addChilds" /-->
		<set-top-rule methodname="setParent" />
		<call-method-rule methodname="loadAfter" />
	</pattern>

	<!-- parsing the if -->
	<pattern value="*/If">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiIfProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
		<call-method-rule methodname="loadAfter" />
	</pattern>

	<pattern value="*/ElseIf">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiElseIfProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the else -->
	<pattern value="*/Else">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiElseProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Goto -->
	<pattern value="*/Goto">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiGoto" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule methodname="setName" paramcount="0" />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Lable -->
	<pattern value="*/Label">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiLabel" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule methodname="setName" paramcount="0" />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Return -->
	<pattern value="*/Return">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiReturnProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Return -->
	<pattern value="*/Exit">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiExitProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the While -->
	<pattern value="*/While">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiWhileProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Switch -->
	<pattern value="*/Switch">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiSwitchProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Case -->
	<pattern value="*/Case">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiSwitchCase" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Default -->
	<pattern value="*/Default">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiDefault" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Set -->
	<pattern value="*/Set">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiSet" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule methodname="setName" paramcount="0" />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Delete -->
	<pattern value="*/Delete">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiDelete" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<call-method-rule methodname="setName" paramcount="0" />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Break -->
	<pattern value="*/Break">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiBreakProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>
	<!-- parsing the Continue -->
	<pattern value="*/Continue">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiContinueProcess" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

	<!-- parsing the Call -->
	<pattern value="*/Call">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiCall" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<call-method-rule pattern="Input" methodname="setInput"  paramcount="1" />
		<call-param-rule pattern="Input" paramnumber="0" />
		<call-method-rule pattern="Output" methodname="setOutput"  paramcount="1" />
		<call-param-rule pattern="Output" paramnumber="0" />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
		<set-hisun-rule methodname="setApplication"
			paramtype="com.hisun.engine.invoke.impl.HiApplicationCTLImpl" />
		<!-- set-root-rule methodname="setApplication" /-->
		
	</pattern>

	<!-- parsing the Exec -->
	<pattern value="*/Exec">
		<object-create-rule
			classname="com.hisun.engine.invoke.impl.HiExec" />
		<!--factory-create-rule classname="com.hisun.engine.HiBeanFactory"/-->
		<set-properties-rule />
		<call-method-rule pattern="Arg" methodname="setArgs"
			paramcount="2" />
		<call-param-rule pattern="Arg" attrname="name" paramnumber="0" />
		<call-param-rule pattern="Arg" attrname="value" paramnumber="1" />
		<set-next-rule methodname="addChilds" />
		<set-top-rule methodname="setParent" />
	</pattern>

</digester-rules>
